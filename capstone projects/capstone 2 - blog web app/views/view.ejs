<%- include('partials/header.ejs') %>

<div class="container list-group d-flex flex-column align-items-center">
    <% allPosts.forEach((post) => { %>
            <a class="list-group-item list-group-item-action m-0 px-3 text-wrap text-break" href="/view/<%= allPosts.indexOf(post) %>">
                <h6 class="mt-3 mb-1 p-0"><%= post.date %></h6>
                <h4 name="postTitle" class="mb-1"><%= post.title %></h4>
                <p name="postContent" class="m-0 opacity-75 text-wrap text-break"><%- (post.content.slice(0, 200)).replace(/(<br>)/gm, " ") %>...</p>
                <p class="text-end m-0 pt-2" style="font-size: x-small"><em>view post -></em></p>
            </a>
            
    <% }); %>

    <% } else { %>
    <p>no posts. start writing now!</p>
</div>

<h1><%- postTitle %></h1>
<h2><%- postDate %></h2>
<p><%- postContent %></p>

<form action="/edit/<%= postId %>" method="get">
  <input type="submit" value="edit" />
</form>

<form action="/delete" method="post">
  <input type="submit" value="delete" />
</form>

<%- include('partials/footer.ejs') %>